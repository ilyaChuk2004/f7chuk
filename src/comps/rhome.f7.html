<template>
      <div class="content page-wrapper" id="pageWrapper">

        <style innerHTML=${css}>

        </style>

        ${$store.state.data.posts.map((item) => $h`
          <a class="post"  style="cursor:${item.cursor()}" href="/single/">
            
            ${support_format_webp() && $h`
              <img data-src=${item.img_webp()} alt='Приложение «трип» постер.png' id='post-${item.name}' class="lazy lazy-fade-in post-img"/>

              `
            }
    
            ${!support_format_webp() &&  $h`
              <img data-src=${item.img_jpg()} alt='Приложение «трип» постер.png' id='post-${item.name}' class="lazy lazy-fade-in post-img"/>
              `
    
            }
            <!-- <picture>
              <source data-src=${item.img_webp()} alt='Приложение «трип» постер.png' type="image/webp"/>
                <img id="tripImg" data-src=${item.img_jpg()} alt='Приложение «трип» постер.png' class="lazy lazy-fade-in post-img"/>
            </picture> -->
        </a>
        `)}

        <!-- style="cursor: url(img/trip/tripCur.cur), auto;" -->
      
  </div>
  </template>
  <script>
  export default (props, {$store, $f7, $, $onMounted}) => {

    let css = ``;

    $store.state.data.posts.map((item) =>{
      css=css+`#post-${item.name}:hover{
        box-shadow:${item.h_box_shadow};
        ${item.h_filter} !important;
      }
      ${item.h_animation}`
    });

    // console.log(css);


    function support_format_webp()
{
 var elem = document.createElement('canvas');

 if (!!(elem.getContext && elem.getContext('2d')))
 {
  // was able or not to get WebP representation
  return elem.toDataURL('image/webp').indexOf('data:image/webp') == 0;
 }
 else
 {
  // very old browser like IE 8, canvas not supported
  return false;
 }
}
    $onMounted(() => {
      $f7.lazy.create($('.page-wrapper'));

  });

  $f7.on('lazyLoaded', (e)=>{
    setTimeout(() => {
      e.style.animation='none'
    }, 500);
  })
    return $render;
  }
  </script>