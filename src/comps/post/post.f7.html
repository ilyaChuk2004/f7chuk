<template>
  ${props.post &&  $h`
    <div class="post" >

      <${post_type} type=${props.post.type} date=${props.post.published.date}/>

     <div class="disc">
       <div class="text">
        ${props.post.shorttext}
       </div>
       <a href="/p/${props.post.name}/"><button class="col button button-outline button-raised">посмотреть</button></a>
     </div>
     
     <${post_swiper} post=${props.post}/>
     

</div>
`}
</template>
<script>

import post_type from "./post_type.f7.html";
import post_swiper from "./post_swiper.f7.html";
  export default (props, {
    $store,
    $f7,
    $h,
    $update,
    $onMounted,
    $el
  }) => {
    let formatthumb = $store.state.gf.support_format_webp()?props.post.thumbwebp.path:props.post.thumbjpg.path


    $onMounted(()=>{  
      window.ttr=$el.value[0];
      setTimeout(() => {
        var swiper = $f7.swiper.create($el.value[0].childNodes[2], {
        speed: 400,
        spaceBetween: 0,
        navigation: {
          nextEl: '.snext',
          prevEl: '.sprew',
          disabledClass:'dis',
          lockClass:'dis',
          hiddenClass:'dis'
        },
        mousewheel: {
    invert: false,
  },
      });
      }, 500);
    });

    return $render;
  }
</script>